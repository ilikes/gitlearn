[#plat_module_bbgapi]
= 公共类库 java 接口请求模块

== 接口需求

    . 请求接口
        .. GET 请求
        .. POST 请求

    . 接口缓存
        .. 根据接口缓存设置缓存结果
        .. 备用缓存缓存最后一次正确结果

    . 记录接口请求日志

== 接口类库结构功能设计

    . 请求工具类
        .. 发起GET请求
        .. 发起POST请求
        .. 记录请求开始/结束时间
        .. 读取接口缓存
        .. 设置接口缓存
        .. 记录接口日志


    . 接口请求对象类
        .. 读取接口配置
        .. 获取/设置接口 method
        .. 获取/设置接口 请求 method
        .. 获取/设置接口 url
        .. 获取/设置接口 GET/POST 的完整 url
        .. 获取/设置接口 接口参数
        .. 获取/设置接口 接口请求时的参数
        .. 获取/设置接口 接口请求时的 header
        .. 获取 接口是否缓存
        .. 获取 接口缓存 key
        .. 获取 接口缓存时间
        .. 获取 接口描述
        .. 获取 接口 GET/POST 的 psr7 请求对象

    . 接口响应对象类
        .. 包含接口请求对象
        .. 包含 psr7 接口响应对象
        .. 获取响应内容
        .. 获取响应状态
        .. 获取响应结果来源/是否是缓存结果 [HTTP请求/缓存]
        .. 获取请求的开始/结束时间/运行时间

== 实现思路

    . 接口集中配置在配置文件中
    . HTTP请求使用 link:http://docs.guzzlephp.org[Guzzle HTTP] 类库
    . 缓存与日志使用公共类库缓存与日志类库

TIP: Guzzle 功能比强大 +
     支持 composer +
     提供实现了 PSR7 的 HTTP 对象 +
     Phalcon 社区的源代码中也是使用此类库

== 接口请求流程图

image::bbgapi_flow.png[]

== 接口实现 UML 类图

